# å°åŒ—æ´»å‹•ç‰¹æœ (Taipei Event Scout)
Line ID: @621ezwxl

ä¸€å€‹æ•´åˆå°åŒ—æ—…éŠç¶² Open API èˆ‡ AI çš„ LINE Bot ç³»çµ±ã€‚  
ä½¿ç”¨è€…é€éè‡ªç„¶èªè¨€è©¢å•ã€Œè¿‘æœŸå°åŒ—æœ‰ä»€éº¼æ´»å‹•ã€ï¼ŒBot æœƒå„ªå…ˆå¾ **S3 å¿«å–è³‡æ–™**å¿«é€Ÿå›è¦†ï¼›  
æ´»å‹•è³‡æ–™ç”± **EventBridge Scheduler** æ¯å¤©å®šæ™‚åŒæ­¥å°åŒ—æ—…éŠç¶²è³‡æ–™ï¼Œé¿å…æ¯æ¬¡æŸ¥è©¢éƒ½æ‰“æ”¿åºœ APIï¼Œé™ä½å»¶é²èˆ‡ä¸ç©©å®šå› ç´ ã€‚

---

## åŠŸèƒ½ç‰¹è‰²

### ğŸ¯ LINE å…§å³æ™‚æŸ¥è©¢è¿‘æœŸæ´»å‹•
ä½¿ç”¨è€…è¼¸å…¥è‡ªç„¶èªå¥ï¼Œä¾‹å¦‚ï¼š
- ã€Œé€™é€±æœ«å°åŒ—æœ‰ä»€éº¼æ´»å‹•ï¼Ÿã€
- ã€Œæ¨è–¦ 3 å€‹å…è²»å±•è¦½ã€
- ã€Œæ˜å¤©æœ‰ä»€éº¼å±•æ¼”æ´»å‹•ï¼Ÿã€

ç³»çµ±æœƒæ ¹æ“šå¿«å–æ´»å‹•è³‡æ–™å›è¦†è¿‘æœŸæ´»å‹•æ¸…å–®
- å¾å€™é¸æ´»å‹•ä¸­æŒ‘å‡ºæœ€ç¬¦åˆä½¿ç”¨è€…å•é¡Œçš„ 1â€“3 ç­†
- ç”Ÿæˆé©åˆ LINE é–±è®€çš„çŸ­æ–‡æ¨è–¦ï¼ˆæ§åˆ¶è¡Œæ•¸ã€é¿å…å†—é•·ï¼‰

### ğŸ—‚ å¿«å–èˆ‡æ’ç¨‹åŒæ­¥ï¼ˆé™ä½å»¶é²ã€é¿å…æ”¿åºœ API ä¸ç©©ï¼‰
- **å¹³å¸¸ LINE Webhook ä¸æ‰“æ”¿åºœ API**ï¼Œåªè®€ S3 JSONï¼ˆå¿«ã€ç©©ã€ä½å»¶é²ï¼‰
- **åªæœ‰ Schedulerï¼ˆEventBridgeï¼‰å®šæœŸåŒæ­¥**æ”¿åºœ API â†’ å¯«å› S3
- è‹¥é‡åˆ° S3 è¢«æ¸…ç©º/ä¸å­˜åœ¨/éæœŸï¼Œä¹Ÿå¯è¨­å®šã€Œè‡ªå‹•è£œæ•‘åˆ·æ–°ã€ï¼ˆå¯é–‹é—œï¼‰

## æŠ€è¡“æ¶æ§‹ç¸½è¦½ï¼ˆâœ… ç›®å‰ç‰ˆæœ¬ï¼šLambda å–®æª”æ•´åˆ + S3 å¿«å–ï¼‰

æœ¬ç³»çµ±æ¡ AWS è¨—ç®¡ï¼Œé‡é»æ˜¯æŠŠã€Œæ”¿åºœ API æ‹‰è³‡æ–™ã€å¾ä½¿ç”¨è€…æŸ¥è©¢è·¯å¾‘ç§»é™¤ï¼Œ
æ”¹æˆ Scheduler æ‰¹æ¬¡åŒæ­¥ï¼Œè®“ LINE æŸ¥è©¢å»¶é²æ›´ç©©å®šã€‚

### ğŸ”§ ä¸»è¦æŠ€è¡“
- èªè¨€ï¼šPythonï¼ˆå–®ä¸€ `lambda_function.py`ï¼‰
- äº‹ä»¶ä¾†æºï¼š
  - LINE Webhookï¼ˆHTTP POSTï¼‰
  - EventBridge Schedulerï¼ˆæ’ç¨‹è§¸ç™¼ï¼‰
- å¿«å–ï¼šAmazon S3ï¼ˆæ´»å‹• JSONï¼‰
- æ´»å‹•è³‡æ–™ä¾†æºï¼šå°åŒ—æ—…éŠç¶² Open API
- AIï¼šOpenAI APIï¼ˆå¯é¸ï¼‰

---

## æ¶æ§‹åœ–ï¼ˆç›®å‰ï¼‰

![æ¶æ§‹åœ–ï¼ˆç›®å‰ï¼‰](https://github.com/user-attachments/assets/4e476a54-25ef-48fe-be21-08084410de30)

> é‡é»ï¼š**LINE æŸ¥è©¢è·¯å¾‘åªè®€ S3ï¼Œä¸æ‰“æ”¿åºœ APIï¼›æ”¿åºœ API åªåœ¨ Scheduler è·¯å¾‘å‘¼å«ã€‚**

```mermaid
flowchart LR
  U[LINE ä½¿ç”¨è€…] -->|è¨Šæ¯| LINE[LINE Messaging API]
  LINE -->|Webhook POST| GW[API Gateway æˆ– Lambda Function URL]
  GW -->|Invoke| L1[AWS Lambda: lambda_function.py]

  subgraph QueryPath[æŸ¥è©¢è·¯å¾‘ï¼šä½å»¶é²ï¼ˆé è¨­ä¸æ‰“æ”¿åºœ APIï¼‰]
    L1 -->|è®€å–å¿«å– JSON| S3[(Amazon S3: taipei_activities.json)]
    S3 --> L1
    L1 -->|å¯é¸ï¼šé€å°‘é‡å€™é¸æ´»å‹•| OAI[OpenAI API]
    OAI --> L1
    L1 -->|Reply API| LINE
  end

  subgraph SyncPath[åŒæ­¥è·¯å¾‘ï¼šæ’ç¨‹æ‰¹æ¬¡æ›´æ–°]
    EB[EventBridge Scheduler] -->|æ¯å¤©/æ¯å°æ™‚ç­‰| L1
    L1 -->|GET begin/end/page| TAPI[å°åŒ—æ—…éŠç¶² Open API]
    TAPI --> L1
    L1 -->|æ•´ç†/Normalize/çµ±è¨ˆlog| L1
    L1 -->|å¯«å›å¿«å–| S3
  end



